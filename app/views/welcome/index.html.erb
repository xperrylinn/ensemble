<%= render 'shared/header' %>

<% if !current_user.nil? %>
    <p>
        <%= link_to 'My entries', entries_by_user_path(current_user.id) %>
    </p>
<% end %>
<h1>
    Public feed
</h1>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>User</th>
            <th>Title</th>
            <th>Text</th>
            <th>Type</th>           
        </tr>
    </thead>
    <tbody>
        <%  Entry.all.each do |entry| %>
            <tr>
                <td><%= entry.created_at %></td>
                <td><%= User.find(entry.user_id).email %></td>
                <td><%= entry.title %></td>
                <td><%= entry.text %></td>
                <td><%= entry.entryable.class %></td>
                <td><%= link_to 'Show', entry %></td>
                <td><%= link_to 'Edit', edit_entry_path(entry) %></td>
                <td><%= link_to 'Destroy', entry, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
    </tbody>
</table>
